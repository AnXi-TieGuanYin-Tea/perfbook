%%
%% This is file `qqz.sty'.  It handles the latex portions of extracting
%%	non-standard gathering operations, including Quick Quizzes and
%%	Original Publications.  Other pieces of the puzzle may be found
%%	in the Makefile and the utilities directory.
%%
%% \QuickQuizChapter{chp:label} -- to introduce a chapter with quick quizzes.
%% \QuickQuiz{question}{answer}	-- to print a question and record the answer.
%% \QuickQuizEnd -- cheat to simplify script parsing.
%% \QuickQuizAnswers -- to dump out all questions and answers in new section.
%%
%% \OriginallyPublished{tag}{sec:label}{title}{publication name}{citation}
%% \ListOriginalPublications -- to dump list of original publications.
%%
%% Copyright (C) IBM Corporation, 2008
%%
%% Authors: Paul E. McKenney <paulmck@linux.vnet.ibm.com>

\newcounter{quickquizctr}
\newcommand{\QuickQuizAnswerChapter}{\textbf{Unknown QuickQAC!!!}}

\newcommand{\QuickQuizChapter}[1]{\setcounter{quickquizctr}{0}}
\newcommand{\QuickQuiz}[1]{
	\refstepcounter{quickquizctr}
	\textbf{Quick Quiz \thechapter.\thequickquizctr:} #1
	\begin{picture}(7,7)(0,0)\put(0,0){\framebox(7,7)[lb]{}}\end{picture}}
\newcommand{\QuickQuizAnswer}[1]{}
\newcommand{\QuickQuizEnd}{}

\newcommand{\QuickQuizAnswers}{
	\chapter{Answers to Quick Quizzes}
	\label{chp:Answers to Quick Quizzes}
	~ \\
	\input{qqz}}

\newcommand{\OriginallyPublished}[5]{}
\newcommand{\ListOriginalPublications}{
	\begin{enumerate}
	\input{origpub}
	\end{enumerate}}

%% Internal interfaces generated by scripts.

\newcommand{\QuickQAC}[1]{
	\renewcommand{\QuickQuizAnswerChapter}{\ref{#1}}
	\setcounter{quickquizctr}{0}
	~ \\ \textbf{Chapter~\ref{#1}}}

\newcommand{\QuickQ}[1]{
	\refstepcounter{quickquizctr} ~ \\ ~ \\
	\textbf{Quick Quiz \QuickQuizAnswerChapter.\thequickquizctr:} #1 \\
	\textbf{Answer:}}


\newcommand{\OrigPubItem}[5]{
	\item	#1~\ref{#2} (``#3'') originally appeared in #4~\cite{#5}.}
